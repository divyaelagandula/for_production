<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
   <style>
        /* * 1. Set body height to 100% of the viewport.
         * 2. Use Flexbox to align content both horizontally (center) and vertically (center).
         */
       body{
        height: 100vh;
        display: flex ;
        justify-content: center;
        align-items: center;
        background-color: lightgrey;
        font-family: Arial, sans-serif;
       }
      label, input,button,a{
        display: block;
        font-size: 14px;
      }
      form{
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      input{
        margin-top: 5px;
        padding: 8px;   
        width: 300px;
        margin-bottom: 15px;
      }
      #error-msg{
        display: none;  
        color: red;
    }
    </style>
    
    <form>
        <label for="email1">Enter your email</label>
        <input type="email" id="email1">
        <label for="password1">Enter your password</label>
        <input type="password" id="password1">
        <button type="submit">Login</button><br>
        <a href="./signup.html">New User-Signup Now</a><br>
    <a href="./forgetpassword.html">forget password</a><br>
    <div id="error-msg"></div>
    </form>
   
</body>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
        const ipaddress=`http://${window.location.hostname}:3000`

    document.addEventListener('DOMContentLoaded',()=>{
        resetform()
          const div=document.getElementById('error-msg')
          div.textContent=''
    })
      function resetform(){
  
    document.getElementById('email1').value=''
    document.getElementById('password1').value=''
 

   }
    const form=document.querySelector('form')
    form.addEventListener('submit',async (event)=>{
        try{
            event.preventDefault()
        const email=document.getElementById('email1').value
        const password=document.getElementById('password1').value
        const obj={email,password}
        const result=await axios.post(`${ipaddress}/users/login`,obj)
        alert(result.data.message)
        resetform()
          const div=document.getElementById('error-msg')
          div.textContent=''
        console.log(result)
          
           localStorage.setItem('token',result.data.token)
            window.location.href = "expense.html"; 
        }
        catch(err){
            console.log(err)
            if(err.status==400 || err.status==404 || err.status==401){
                const div=document.getElementById('error-msg')
                div.textContent=`Error:${err.response.data.message}`
                resetform()
            }
        }
        

    })
</script>
</html>